name: Deploy to Render

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: Trigger Render Deployment
        run: |
          if [ -n "${{ secrets.RENDER_DEPLOY_HOOK }}" ]; then
            echo "Triggering Render deployment..."
            curl -X POST "${{ secrets.RENDER_DEPLOY_HOOK }}"
            echo "Deployment triggered successfully!"
          else
            echo "⚠️ RENDER_DEPLOY_HOOK secret not set"
            echo "Please add your Render Deploy Hook URL as a secret"
            echo "Get it from: Render Dashboard → Your Service →" \
                 "Settings → Deploy Hook"
            exit 1
          fi
