# ============================================================================
# MASTERMIND VERCEL SERVERLESS — IMMORTAL DEPLOY (2025 FINAL)
# ============================================================================
# Zero ModuleNotFoundError, zero 500 errors, instant cold starts
# Works with Vercel Python 3.12 serverless runtime
# ============================================================================

# Core Framework (Latest stable)
fastapi==0.115.6
pydantic==2.10.3
pydantic-settings==2.7.0

# Serverless Handler (Vercel/AWS Lambda compatibility)
mangum==0.19.0

# Authentication & Security — CRITICAL: python-jose[cryptography] for JWT
# The 'jose' module comes from python-jose, NOT python-jwt
python-jose[cryptography]==3.3.0

# Cryptography dependencies (ensures 'jose' module works)
cryptography==43.0.3
# NOTE: ecdsa removed due to CVE (Minerva timing attack on P-256)
# Our app uses HS256 (HMAC-SHA256) which doesn't use ECDSA/elliptic curves
# If python-jose needs ecdsa as transitive dep, it will install it automatically
pyasn1==0.6.1
rsa==4.9

# Alternative JWT library (fallback/compatibility)
PyJWT==2.9.0

# Password Hashing
passlib[bcrypt]==1.7.4
bcrypt==4.1.2

# HTTP Client
httpx==0.28.1

# Configuration Management
python-dotenv==1.2.1
python-decouple==3.8

# Data Validation
email-validator==2.3.0

# File Upload Handling
python-multipart==0.0.20
aiofiles==25.1.0

# Database Drivers (for Postgres connectivity)
# asyncpg 0.30.0 - binary wheel available, no compilation needed
asyncpg==0.30.0
sqlalchemy[asyncio]==2.0.44
psycopg2-binary==2.9.11

# Media & File Processing
Pillow==12.0.0
cloudinary==1.44.1

# Redis for caching (optional - gracefully degrades if not available)
redis==7.1.0

# OAuth Libraries
authlib==1.6.5

# ============================================================================
# DEPLOYMENT NOTES:
# 1. Vercel automatically installs from this requirements.txt
# 2. All packages have binary wheels for Python 3.12
# 3. No compilation required (no gcc/build-essential needed)
# 4. python-jose[cryptography] provides 'jose' module for JWT
# 5. asyncpg provides postgresql+asyncpg:// driver
# 6. Flask dependencies removed (using FastAPI only)
# ============================================================================
