# ============================================================================
# HireMeBahamas - Production Environment Variables
# ============================================================================
#
# ðŸš€ SCALE TO 1M+ USERS
#
# This file contains all environment variables needed for production deployment
# with autoscaling, read replicas, and monetization features.
#
# ðŸ“– Documentation:
#    - Setup guide: SCALE_TO_1M_USERS_BLUEPRINT.md
#    - Backend pattern: BACKEND_SCALING_PATTERN.md
#    - Monetization: MONETIZATION_STRATEGY.md
#
# ðŸ”’ SECURITY: Never commit this file with actual values!
#
# ============================================================================

# ============================================================================
# APPLICATION CONFIG
# ============================================================================

# Environment (production, staging, development)
ENVIRONMENT=production

# Application name
APP_NAME=HireMeBahamas

# Debug mode (MUST be false in production)
DEBUG=false

# ============================================================================
# DATABASE - PostgreSQL (Neon Serverless)
# ============================================================================

# Primary database (for writes)
# Format: postgresql+asyncpg://user:password@host:port/database?sslmode=require
DATABASE_URL=postgresql+asyncpg://username:password@ep-xxxxx.neon.tech:5432/hiremebahamas?sslmode=require

# Read replicas (for reads) - Load balanced automatically
DATABASE_READ_REPLICA_1=postgresql+asyncpg://username:password@ep-xxxxx-read-1.neon.tech:5432/hiremebahamas?sslmode=require
DATABASE_READ_REPLICA_2=postgresql+asyncpg://username:password@ep-xxxxx-read-2.neon.tech:5432/hiremebahamas?sslmode=require
DATABASE_READ_REPLICA_3=postgresql+asyncpg://username:password@ep-xxxxx-read-3.neon.tech:5432/hiremebahamas?sslmode=require

# Connection pool settings
DB_POOL_SIZE=20
DB_POOL_MAX_OVERFLOW=40
DB_POOL_RECYCLE=300
DB_CONNECT_TIMEOUT=5
DB_COMMAND_TIMEOUT=30

# ============================================================================
# REDIS CACHE - Upstash (Serverless)
# ============================================================================

# Redis URL for caching and Pub/Sub
# Format: redis://default:password@hostname:port
REDIS_URL=redis://default:password@xxxxx.upstash.io:6379

# Redis connection pool
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_KEEPALIVE=true

# Cache TTL (seconds)
CACHE_DEFAULT_TTL=300
CACHE_USER_TTL=600
CACHE_FEED_TTL=300
CACHE_TRENDING_TTL=600

# ============================================================================
# SECURITY & AUTH
# ============================================================================

# Secret key (generate with: python3 -c "import secrets; print(secrets.token_urlsafe(32))")
SECRET_KEY=REPLACE_WITH_RANDOM_32_CHAR_STRING

# JWT secret key (generate separately)
JWT_SECRET_KEY=REPLACE_WITH_RANDOM_32_CHAR_STRING

# JWT token expiration
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing rounds (10-12 for production)
BCRYPT_ROUNDS=10

# ============================================================================
# CORS & SECURITY HEADERS
# ============================================================================

# Allowed origins (comma-separated)
CORS_ORIGINS=https://hiremebahamas.com,https://www.hiremebahamas.com,https://app.hiremebahamas.com

# Allowed methods
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS

# Allowed headers
CORS_ALLOW_HEADERS=*

# Allow credentials
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# GUNICORN & WORKERS
# ============================================================================

# Number of worker processes (4 recommended)
WEB_CONCURRENCY=4

# Number of threads per worker (4 recommended)
WEB_THREADS=4

# Worker timeout (seconds)
GUNICORN_TIMEOUT=60

# Graceful timeout (seconds)
GUNICORN_GRACEFUL_TIMEOUT=30

# Keep-alive (seconds)
GUNICORN_KEEPALIVE=5

# Max requests before worker restart
GUNICORN_MAX_REQUESTS=1000
GUNICORN_MAX_REQUESTS_JITTER=100

# ============================================================================
# FILE STORAGE - Cloudflare R2 (S3-compatible)
# ============================================================================

# R2 account ID
R2_ACCOUNT_ID=your-account-id

# R2 access credentials
R2_ACCESS_KEY_ID=your-access-key
R2_SECRET_ACCESS_KEY=your-secret-key

# R2 bucket name
R2_BUCKET_NAME=hiremebahamas-uploads

# R2 endpoint URL
R2_ENDPOINT_URL=https://your-account-id.r2.cloudflarestorage.com

# Public CDN URL (if using Cloudflare CDN)
R2_PUBLIC_URL=https://cdn.hiremebahamas.com

# Max upload size (bytes) - 50MB default
MAX_UPLOAD_SIZE=52428800

# Allowed file types
ALLOWED_UPLOAD_EXTENSIONS=jpg,jpeg,png,gif,webp,pdf,doc,docx

# ============================================================================
# MONETIZATION - Stripe
# ============================================================================

# Stripe API keys (from https://dashboard.stripe.com/apikeys)
STRIPE_SECRET_KEY=sk_live_xxxxx
STRIPE_PUBLISHABLE_KEY=pk_live_xxxxx

# Stripe webhook secret (from https://dashboard.stripe.com/webhooks)
STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# Subscription plan IDs (from Stripe dashboard)
STRIPE_PLAN_PRO_MONTHLY=price_xxxxx
STRIPE_PLAN_PRO_ANNUAL=price_xxxxx
STRIPE_PLAN_BUSINESS_MONTHLY=price_xxxxx
STRIPE_PLAN_BUSINESS_ANNUAL=price_xxxxx

# Free tier limits
FREE_TIER_MESSAGES_PER_MONTH=10
FREE_TIER_POSTS_PER_MONTH=5
FREE_TIER_MAX_CONNECTIONS=100

# Pro tier limits
PRO_TIER_INMAILS_PER_MONTH=5

# Business tier limits
BUSINESS_TIER_INMAILS_PER_MONTH=50
BUSINESS_TIER_TEAM_MEMBERS=5

# ============================================================================
# EMAIL - SendGrid (or similar)
# ============================================================================

# SendGrid API key
SENDGRID_API_KEY=SG.xxxxx

# From email
EMAIL_FROM=noreply@hiremebahamas.com
EMAIL_FROM_NAME=HireMeBahamas

# Email templates
EMAIL_WELCOME_TEMPLATE_ID=d-xxxxx
EMAIL_VERIFICATION_TEMPLATE_ID=d-xxxxx
EMAIL_PASSWORD_RESET_TEMPLATE_ID=d-xxxxx
EMAIL_JOB_APPLICATION_TEMPLATE_ID=d-xxxxx

# ============================================================================
# NOTIFICATIONS - Push (Firebase/OneSignal)
# ============================================================================

# Firebase Cloud Messaging (optional)
FCM_SERVER_KEY=xxxxx
FCM_SENDER_ID=xxxxx

# OneSignal (alternative)
ONESIGNAL_APP_ID=xxxxx
ONESIGNAL_REST_API_KEY=xxxxx

# ============================================================================
# ANALYTICS & MONITORING
# ============================================================================

# Sentry (error tracking)
SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Google Analytics
GA_TRACKING_ID=G-xxxxx

# DataDog (optional)
DATADOG_API_KEY=xxxxx
DATADOG_APP_KEY=xxxxx

# New Relic (optional)
NEW_RELIC_LICENSE_KEY=xxxxx
NEW_RELIC_APP_NAME=HireMeBahamas

# ============================================================================
# SOCIAL AUTH (OAuth)
# ============================================================================

# Google OAuth
GOOGLE_CLIENT_ID=xxxxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=xxxxx
GOOGLE_REDIRECT_URI=https://hiremebahamas.com/auth/google/callback

# Facebook OAuth
FACEBOOK_APP_ID=xxxxx
FACEBOOK_APP_SECRET=xxxxx
FACEBOOK_REDIRECT_URI=https://hiremebahamas.com/auth/facebook/callback

# LinkedIn OAuth
LINKEDIN_CLIENT_ID=xxxxx
LINKEDIN_CLIENT_SECRET=xxxxx
LINKEDIN_REDIRECT_URI=https://hiremebahamas.com/auth/linkedin/callback

# ============================================================================
# SEARCH - Elasticsearch/Meilisearch (Optional)
# ============================================================================

# Meilisearch
MEILISEARCH_HOST=https://xxxxx.meilisearch.io
MEILISEARCH_API_KEY=xxxxx

# Elasticsearch (alternative)
ELASTICSEARCH_URL=https://xxxxx.es.amazonaws.com
ELASTICSEARCH_USERNAME=xxxxx
ELASTICSEARCH_PASSWORD=xxxxx

# ============================================================================
# RATE LIMITING
# ============================================================================

# Rate limit configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STRATEGY=sliding-window

# Auth endpoints
RATE_LIMIT_AUTH_PER_MINUTE=5
RATE_LIMIT_AUTH_PER_HOUR=20

# API endpoints
RATE_LIMIT_API_PER_MINUTE=100
RATE_LIMIT_API_PER_HOUR=1000

# Upload endpoints
RATE_LIMIT_UPLOAD_PER_MINUTE=10
RATE_LIMIT_UPLOAD_PER_HOUR=50

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable/disable features
FEATURE_MESSAGING=true
FEATURE_VIDEO_CALLS=false
FEATURE_STORIES=true
FEATURE_GROUPS=true
FEATURE_EVENTS=false
FEATURE_MARKETPLACE=false

# Beta features (only for paid users)
FEATURE_BETA_AI_MATCHING=false
FEATURE_BETA_SALARY_INSIGHTS=false

# ============================================================================
# LOGGING
# ============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log format
LOG_FORMAT=json

# Log output
LOG_OUTPUT=stdout

# Slow query threshold (seconds)
SLOW_QUERY_THRESHOLD=1.0

# ============================================================================
# PERFORMANCE
# ============================================================================

# Request timeout (seconds)
REQUEST_TIMEOUT=30

# Max request body size (bytes)
MAX_REQUEST_SIZE=52428800

# Enable gzip compression
GZIP_COMPRESSION=true
GZIP_MINIMUM_SIZE=1000

# ============================================================================
# CRON JOBS & BACKGROUND TASKS
# ============================================================================

# Enable background tasks
BACKGROUND_TASKS_ENABLED=true

# Celery (if using)
CELERY_BROKER_URL=redis://default:password@xxxxx.upstash.io:6379/0
CELERY_RESULT_BACKEND=redis://default:password@xxxxx.upstash.io:6379/0

# Cron schedule for cleanup tasks
CRON_CLEANUP_SCHEDULE=0 2 * * *
CRON_BACKUP_SCHEDULE=0 3 * * *
CRON_ANALYTICS_SCHEDULE=0 4 * * *

# ============================================================================
# DEPLOYMENT INFO
# ============================================================================

# Deployment platform
PLATFORM=render

# Instance ID (auto-set by platform)
INSTANCE_ID=

# Region
REGION=us-east-1

# Git commit SHA (auto-set by CI/CD)
GIT_COMMIT=

# Build timestamp (auto-set by CI/CD)
BUILD_TIMESTAMP=
