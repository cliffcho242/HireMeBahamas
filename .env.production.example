# =============================================================================
# FACEBOOK/INSTAGRAM OPTIMIZATION — PRODUCTION ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env.production and fill in your values
# =============================================================================

# =============================================================================
# BACKEND (RENDER FASTAPI)
# =============================================================================

# Application Settings
ENVIRONMENT=production
SECRET_KEY=your-secure-random-key-here-min-32-chars
FRONTEND_URL=https://your-app.vercel.app

# Python Settings
PYTHONUNBUFFERED=true
PYTHON_VERSION=3.12.0

# =============================================================================
# DATABASE (NEON POSTGRESQL)
# =============================================================================

# CRITICAL: Use the POOLED endpoint for best performance!
# Format: postgresql+asyncpg://user:password@ep-xxxx-pooler.REGION.aws.neon.tech:5432/database?sslmode=require
# 
# Region Options:
# - us-west-2 (Oregon): Lowest latency to Render Oregon (~1-5ms)
# - us-east-1 (Virginia): Cross-region (~70-100ms), still fast with pooling
DATABASE_URL=postgresql+asyncpg://user:password@ep-xxxx-pooler.us-west-2.aws.neon.tech:5432/database?sslmode=require

# Connection Pool Configuration (optimized for Neon + Render Always-On)
# Conservative pool size to avoid memory issues (each connection ~2-5MB RAM)
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=5
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=300
DB_CONNECT_TIMEOUT=10
DB_COMMAND_TIMEOUT=30
DB_STATEMENT_TIMEOUT_MS=30000

# SSL Configuration
DB_SSL_MODE=require
DB_FORCE_TLS_1_3=true

# =============================================================================
# CACHING (OPTIONAL - RECOMMENDED FOR SUB-100MS RESPONSES)
# =============================================================================

# Upstash Redis (free tier: 10k requests/day)
# Format: redis://:password@region.upstash.io:port
# REDIS_URL=redis://:password@region.upstash.io:port

# =============================================================================
# SECURITY
# =============================================================================

# Trust Render's load balancer
FORWARDED_ALLOW_IPS=*

# Disable debug mode in production
DEBUG=false

# =============================================================================
# FRONTEND (VERCEL)
# =============================================================================

# Backend API URL (set in Vercel dashboard)
VITE_API_URL=https://your-app.onrender.com

# OAuth Configuration (optional)
# VITE_GOOGLE_CLIENT_ID=your-google-client-id
# VITE_APPLE_CLIENT_ID=your-apple-client-id

# Socket.IO URL (if different from API URL)
# VITE_SOCKET_URL=https://your-app.onrender.com

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================
#
# 1. RENDER BACKEND:
#    - Go to https://dashboard.render.com
#    - Select your web service
#    - Environment tab → Add all variables above (except VITE_*)
#
# 2. VERCEL FRONTEND:
#    - Go to https://vercel.com/dashboard
#    - Select your project → Settings → Environment Variables
#    - Add only VITE_* variables
#
# 3. NEON DATABASE:
#    - Get your connection string from https://console.neon.tech
#    - IMPORTANT: Use the POOLED endpoint (has -pooler in hostname)
#    - REGION: Choose us-west-2 (Oregon) for lowest latency to Render
#    - Example: ep-cool-name-pooler.us-west-2.aws.neon.tech
#
# 4. UPSTASH REDIS (Optional):
#    - Create database at https://console.upstash.com
#    - Copy Redis URL with password
#    - Format: redis://:password@region.upstash.io:port
#
# =============================================================================
